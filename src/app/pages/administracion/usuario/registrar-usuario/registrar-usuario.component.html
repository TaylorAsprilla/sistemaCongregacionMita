<div class="row">
  <div class="col-md-12 col-md-offset-3">
    <form [formGroup]="registroUnoForm" id="msform">
      <!-- progressbar -->
      <ul id="progressbar">
        <li [ngClass]="step >= 1 ? 'active ' : 'inactive'">Información Personal</li>
        <li [ngClass]="step >= 2 ? 'active' : 'inactive'">Locación</li>
        <li [ngClass]="step >= 3 ? 'active' : 'inactive'">Información Laboral</li>
        <li [ngClass]="step == 4 ? 'active' : 'inactive'">Información Eclesiástica</li>
      </ul>
      <!-- ==============================================================================
                      Formulario #1 Información Personal
    ============================================================================== -->
      <!-- fieldsets -->
      <fieldset *ngIf="step == 1">
        <div class="fs-title mb-2">Información Personal</div>
        <div class="form-group">
          <label class="input-group">Fecha de Nacimiento:</label>
          <input type="date" formControlName="fechaNacimiento" class="form-control" placeholder="Fecha de Nacimiento" />
          <small
            class="form-text text-muted"
            *ngIf="
              registroUnoForm.get('fechaNacimiento').hasError('required') &&
              registroUnoForm.get('fechaNacimiento').touched
            "
          >
            La fecha de nacimiento del usuario es requerida.
          </small>
        </div>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Primer Nombre:</label>
            <input type="text" formControlName="primerNombre" class="form-control" placeholder="Primer Nombre" />
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('primerNombre').hasError('required') && registroUnoForm.get('primerNombre').touched
              "
            >
              La primer nombre del usuario es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('primerNombre').hasError('minlength') && registroUnoForm.get('primerNombre').touched
              "
            >
              El primer nombre del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-6 col col-sm-12">
            <label class="input-group">Segundo Nombre:</label>
            <input type="text" formControlName="segundoNombre" class="form-control" placeholder="Segundo Nombre" />
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('segundoNombre').hasError('minlength') &&
                registroUnoForm.get('segundoNombre').touched
              "
            >
              El segundo nombre del usuario no tiene la longitud mínima permitida.
            </small>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Primer Apellido:</label>
            <input type="text" formControlName="primerApellido" class="form-control" placeholder="Primer Apellido" />
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('primerApellido').hasError('required') &&
                registroUnoForm.get('primerApellido').touched
              "
            >
              La primer apellido del usuario es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('primerApellido').hasError('minlength') &&
                registroUnoForm.get('primerApellido').touched
              "
            >
              El primer apellido del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Segundo Apellido:</label>
            <input type="text" formControlName="segundoApellido" class="form-control" placeholder="Segundo Apellido" />
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('segundoApellido').hasError('minlength') &&
                registroUnoForm.get('segundoApellido').touched
              "
            >
              El segundo apellido del usuario no tiene la longitud mínima permitida.
            </small>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Apodo:</label>
            <input type="text" formControlName="apodo" class="form-control" placeholder="Apodo" />
            <small
              class="form-text text-muted"
              *ngIf="registroUnoForm.get('apodo').hasError('minlength') && registroUnoForm.get('apodo').touched"
            >
              El apodo del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Email:</label>
            <input type="email" formControlName="email" class="form-control" inputmode="text" placeholder="Email" />
            <small
              class="form-text text-muted"
              *ngIf="registroUnoForm.get('email').hasError('required') && registroUnoForm.get('email').touched"
            >
              El correo electrónico es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="registroUnoForm.get('email').hasError('email') && registroUnoForm.get('email').touched"
            >
              El valor ingresado no corresponde a un correo electrónico.
            </small>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Genero:</label>
            <select class="form-control" formControlName="genero_id">
              <option value="" disabled>Seleccione el genero</option>
              <option *ngFor="let genero of generos" [value]="genero.id">
                {{ genero.genero }}
              </option>
            </select>
            <small
              class="form-text text-muted"
              *ngIf="registroUnoForm.get('genero_id').hasError('required') && registroUnoForm.get('genero_id').touched"
            >
              El género del usuario es requerido.
            </small>
          </div>

          <div class="form-group col-md-6 col-sm-12">
            <label class="input-group">Estado Civil:</label>
            <select class="form-control" formControlName="estadoCivil_id">
              <option value="" disabled>Seleccione el Estado Civil</option>
              <option *ngFor="let estadoCivil of estadoCivil" [value]="estadoCivil.id">
                {{ estadoCivil.estadoCivil }}
              </option>
            </select>
            <small
              class="form-text text-muted"
              *ngIf="
                registroUnoForm.get('estadoCivil_id').hasError('required') &&
                registroUnoForm.get('estadoCivil_id').touched
              "
            >
              El estado civil del usuario es requerido.
            </small>
          </div>
        </div>

        <button
          (click)="next()"
          type="button"
          name="next"
          class="btn btn-primary"
          [disabled]="this.registroUnoForm.invalid"
        >
          Siguiente
        </button>
      </fieldset>
    </form>

    <!-- ==============================================================================
                      Formulario #2 Información de Locación
    ============================================================================== -->

    <form [formGroup]="registroDosForm" id="msform">
      <fieldset *ngIf="step == 2">
        <h2 class="fs-title">Información de Locación</h2>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label>Nacionalidad: </label>
            <input
              type="text"
              placeholder="Buscar la nacionalidad"
              [formControl]="inputNacionalidad"
              formControlName="nacionalidad_id"
              [matAutocomplete]="nacionalidad"
              matInput
              class="form-control"
            />
            <mat-autocomplete #nacionalidad="matAutocomplete">
              <mat-option *ngFor="let item of letrasFiltrarNacionalidad | async" [value]="item.nombre">
                {{ item.nombre }}
              </mat-option>
            </mat-autocomplete>

            <small
              class="form-text text-muted"
              *ngIf="
                registroDosForm.get('nacionalidad_id').hasError('required') &&
                registroDosForm.get('nacionalidad_id').touched
              "
            >
              La nacionalidad del usuario es requerida.
            </small>
          </div>

          <div class="form-group col-md-6 col-sm-12">
            <label>Rol en casa:</label>
            <select class="form-control" formControlName="rolCasa_id">
              <option value="" disabled>Seleccione el Rol en la Casa</option>
              <option *ngFor="let rolCasa of rolCasa" [value]="rolCasa.id">
                {{ rolCasa.rolCasa }}
              </option>
            </select>
            <small
              class="form-text text-muted"
              *ngIf="
                registroDosForm.get('rolCasa_id').hasError('required') && registroDosForm.get('rolCasa_id').touched
              "
            >
              El rol de la casa del usuario es requerido.
            </small>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label for="celular">Celular</label>
            <ngx-intl-tel-input
              [cssClass]="'form-control'"
              [preferredCountries]="paisesPreferidos"
              [enableAutoCountrySelect]="true"
              [enablePlaceholder]="true"
              [searchCountryFlag]="true"
              [searchCountryField]="[buscarPais.Iso2, buscarPais.Name]"
              [selectFirstCountry]="false"
              [selectedCountryISO]="paisISO.PuertoRico"
              [maxLength]="15"
              [phoneValidation]="true"
              [separateDialCode]="codigoDeMarcadoSeparado"
              [numberFormat]="formatoNumeroTelefonico.International"
              name="numeroCelular"
              formControlName="numeroCelular"
            >
            </ngx-intl-tel-input>
            <small
              class="form-text text-muted"
              *ngIf="
                registroDosForm.get('numeroCelular').hasError('required') &&
                registroDosForm.get('numeroCelular').touched
              "
            >
              El número de celular del usuario es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="
                registroDosForm.get('numeroCelular').hasError('minlength') &&
                registroDosForm.get('numeroCelular').touched
              "
            >
              El número de celular del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-6 col-sm-12">
            <label for="telefonoCasa">Teléfono de la Casa:</label>
            <ngx-intl-tel-input
              [cssClass]="'form-control'"
              [preferredCountries]="paisesPreferidos"
              [enableAutoCountrySelect]="true"
              [enablePlaceholder]="true"
              [searchCountryFlag]="true"
              [searchCountryField]="[buscarPais.Iso2, buscarPais.Name]"
              [selectFirstCountry]="false"
              [selectedCountryISO]="paisISO.PuertoRico"
              [maxLength]="15"
              [phoneValidation]="true"
              [separateDialCode]="codigoDeMarcadoSeparado"
              [numberFormat]="formatoNumeroTelefonico.National"
              name="telefonoCasa"
              formControlName="telefonoCasa"
            >
            </ngx-intl-tel-input>
          </div>
        </div>

        <div class="row">
          <legend>Dirección de Residencia:</legend>
          <div class="form-group col-md-4 col-sm-12">
            <label>Dirección:</label>
            <input type="text" class="form-control" formControlName="direccion" placeholder="Dirección" />
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('direccion').hasError('required') && registroDosForm.get('direccion').touched"
            >
              La dirección del usuario es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('direccion').hasError('minlength') && registroDosForm.get('direccion').touched"
            >
              La dirección del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-3 col-sm-12">
            <label>Ciudad:</label>
            <input type="text" formControlName="ciudad" class="form-control" placeholder="Ciudad" />
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('required') && registroDosForm.get('ciudad').touched"
            >
              La ciudad es requerida.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('minlength') && registroDosForm.get('ciudad').touched"
            >
              El campo ciudad no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-3 col-sm-12">
            <label>Departamento:</label>
            <input type="text" formControlName="departamento" class="form-control" placeholder="Departamento" />

            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('minlength') && registroDosForm.get('ciudad').touched"
            >
              El campo departamento no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-2 col-sm-12">
            <label>Código Postal:</label>
            <input type="number" class="form-control" formControlName="codigoPostal" placeholder="Código Postal" />
          </div>
        </div>

        <div class="row">
          <div class="form-group col-md-6 col-sm-12">
            <label>Pais: </label>
            <!-- <input
              type="text"
              placeholder="Pais de Residencia"
              [formControl]="myControl"
              formControlName="pais_id"
              [matAutocomplete]="auto"
              class="form-control"
            /> -->
            <!-- <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let item of filteredOptions | async" [value]="item.nombre">
                {{ item.nombre }}
              </mat-option>
            </mat-autocomplete> -->

            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('pais_id').hasError('required') && registroDosForm.get('pais_id').touched"
            >
              La nacionalidad del usuario es requerida.
            </small>
          </div>
        </div>

        <div class="row">
          <legend>Dirección postal:</legend>
          <div class="form-group col-md-4 col-sm-12">
            <label>Dirección:</label>
            <input type="text" class="form-control" formControlName="direccion" placeholder="Dirección" />
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('direccion').hasError('required') && registroDosForm.get('direccion').touched"
            >
              La dirección del usuario es requerido.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('direccion').hasError('minlength') && registroDosForm.get('direccion').touched"
            >
              La dirección del usuario no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-3 col-sm-12">
            <label>Ciudad:</label>
            <input type="text" formControlName="ciudad" class="form-control" placeholder="Ciudad" />
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('required') && registroDosForm.get('ciudad').touched"
            >
              La ciudad es requerida.
            </small>
            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('minlength') && registroDosForm.get('ciudad').touched"
            >
              El campo ciudad no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-3 col-sm-12">
            <label>Departamento:</label>
            <input type="text" formControlName="departamento" class="form-control" placeholder="Departamento" />

            <small
              class="form-text text-muted"
              *ngIf="registroDosForm.get('ciudad').hasError('minlength') && registroDosForm.get('ciudad').touched"
            >
              El campo departamento no tiene la longitud mínima permitida.
            </small>
          </div>

          <div class="form-group col-md-2 col-sm-12">
            <label>Código Postal:</label>
            <input type="number" class="form-control" formControlName="codigoPostal" placeholder="Código Postal" />
          </div>
        </div>

        <div class="form-group col-md-6 col-sm-12">
          <label>Pais: </label>
          <!-- <input
            type="text"
            placeholder="Pais de Residencia"
            [formControl]="myControl"
            formControlName="pais_id"
            [matAutocomplete]="auto"
            class="form-control"
          /> -->
          <!-- <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let item of filteredOptions | async" [value]="item.nombre">
              {{ item.nombre }}
            </mat-option>
          </mat-autocomplete> -->

          <small
            class="form-text text-muted"
            *ngIf="registroDosForm.get('pais_id').hasError('required') && registroDosForm.get('pais_id').touched"
          >
            La nacionalidad del usuario es requerida.
          </small>
        </div>

        <button (click)="previous()" type="button" name="next" class="btn btn-primary mr-3">Anterior</button>

        <button (click)="next()" type="button" name="next" class="btn btn-primary">Siguiente</button>
      </fieldset>
    </form>

    <!-- ==============================================================================
                      Formulario #3 Información Laboral
    ============================================================================== -->

    <form [formGroup]="registroTresForm" id="msform">
      <fieldset *ngIf="step == 3">
        <h2 class="fs-title">Información Laboral</h2>
        <label class="space">¿Cuales son sus fuentes de ingresos mensual?</label>
        <!-- TODO fuente de ingresos -->
        <div class="row">
          <!-- <div class="col-md-1" *ngFor="let pais of paises"><input type="checkbox" /> {{ pais.pais }}</div> -->
        </div>

        <div class="form-group">
          <label>Aproximadamente ¿cuál es su ingreso mensual?</label>
          <p>Por favor incluya las iniciales de la moneda de su país (ej. USD, CAD)</p>
          <input type="text" formControlName="ingresoMensual" class="form-control" placeholder="Ingreso Mensual" />
        </div>

        <div class="form-group">
          <label>¿Cuál es el grado académico más alto alcanzado?</label>
          <input type="text" formControlName="gradoAcademico_id" class="form-control" placeholder="Grado Académico" />
        </div>

        <div class="form-group">
          <label>¿A qué se dedica?</label>
          <input type="text" formControlName="tipoEmpleo_id" class="form-control" placeholder="Tipo de Empleo" />
        </div>

        <div class="form-group">
          <label>Especialización de empleo</label>
          <p>(ej. Cirujano, Mecánico de equipo pesado)</p>
          <input type="text" formControlName="tipoEmpleo_id" class="form-control" placeholder="Tipo de Empleo" />
        </div>

        <button (click)="previous()" type="button" name="previous" class="next btn btn-primary botonPrincipal mr-3">
          Anterior
        </button>

        <button (click)="next()" type="button" name="next" class="btn btn-primary">Siguiente</button>
      </fieldset>
    </form>

    <!-- ==============================================================================
                      Formulario #4 Información de Eclesiástica
    ============================================================================== -->

    <form [formGroup]="registroCuatroForm" id="msform">
      <fieldset *ngIf="step == 4">
        <h2 class="fs-title">Información de Eclesiástica</h2>
        <div class="row">
          <label>
            ¿Es usted un miembro nuevo (MN),miembro activo (MA), miembro no activo (MNA) o miembro enfermo (ME)?</label
          >
          <!-- <div class="col-md-1" *ngFor="let pais of paises">
            <input [value]="pais.id" type="radio" name="pais" formControlName="tipomiembreo_id" />
            {{ pais.pais }}
          </div> -->
        </div>

        <!-- <div class="row">
          <label> ¿Eres miembro de la Juventud?</label>
          <div class="col-md-6">
            <input [value]="1" type="radio" formControlName="esJoven" />
            Sí

            <input [value]="0" type="radio" formControlName="esJoven" />
            No
          </div>

          <div class="col-md-6">
            <label class="space">¿A cuál de los cuerpos ministeriales pertenece?</label>

            <div class="row">
              <div class="col-md-1" *ngFor="let pais of paises">
                <input type="checkbox" formControlName="ministerio" /> {{ pais.pais }}
              </div>
            </div>
          </div>
        </div>

        <div>
          <label class="space">¿Qué tipo de labor voluntaria/ministerial realiza?</label>

          <div class="row">
            <div class="col-md-1" *ngFor="let pais of paises">
              <input type="checkbox" formControlName="voluntario" /> {{ pais.pais }}
            </div>
          </div>
        </div> -->

        <div class="input-group mb-3">
          <label class="space">Congregación: </label>
          <select
            class="form-control"
            formControlName="congregacion_id"
            (change)="listarCampos(txtCongregacion.value)"
            #txtCongregacion
          >
            <option value="" disabled>Seleccione la congregación a la que pertenece</option>
            <option *ngFor="let congregacion of congregacionesFiltradas" [value]="congregacion.id">
              {{ congregacion.congregacion }}
            </option>
          </select>
          <small
            class="form-text text-muted"
            *ngIf="
              usuarioForm.get('congregacion_id').hasError('required') && usuarioForm.get('congregacion_id').touched
            "
          >
            La congregación del usuario es requerida.
          </small>
        </div>

        <div class="input-group mb-3">
          <label class="space">Campo: </label>
          <select class="form-control" formControlName="campo_id">
            <option value="" disabled>Seleccione el campo al que pertenece</option>
            <option *ngFor="let campo of camposFiltrados" [value]="campo.id">
              {{ campo.campo }}
            </option>
          </select>
        </div>

        <div class="input-group mb-3">
          <label class="space">Tipo Documento:</label>
          <select class="form-control" formControlName="tipoDocumento_id">
            <option value="" disabled>Seleccione el tipo de documento</option>
            <option *ngFor="let tipoDocumento of tipoDocumentos" [value]="tipoDocumento.id">
              {{ tipoDocumento.documento }}
            </option>
          </select>
        </div>

        <div class="input-group mb-3">
          <label class="space">Vacuna:</label>
          <select class="form-control" formControlName="vacuna_id">
            <option value="" disabled>Seleccione la vacuna</option>
            <option *ngFor="let vacuna of vacunas" [value]="vacuna.id">
              {{ vacuna.vacuna }}
            </option>
          </select>
          <small
            class="form-text text-muted"
            *ngIf="usuarioForm.get('vacuna_id').hasError('required') && usuarioForm.get('vacuna_id').touched"
          >
            La vanuna del usuario es requerida.
          </small>
        </div>

        <div class="input-group mb-3">
          <label class="space">Dosis:</label>
          <select class="form-control" formControlName="dosis_id">
            <option value="" disabled>Seleccione la dosis</option>
            <option *ngFor="let dosis of dosis" [value]="dosis.id">
              {{ dosis.dosis }}
            </option>
          </select>
          <small
            class="form-text text-muted"
            *ngIf="usuarioForm.get('dosis_id').hasError('required') && usuarioForm.get('dosis_id').touched"
          >
            Las dosis del usuario es requerida.
          </small>
        </div>

        <button (click)="previous()" type="button" name="previous" class="next btn btn-primary botonPrincipal mr-3">
          Anterior
        </button>
        <button type="submit" class="btn btn-primary" (click)="guardarUsuario()">
          <i class="fa fa-save"></i> Registro
        </button>
      </fieldset>
    </form>
  </div>
</div>
